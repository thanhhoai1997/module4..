<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Shopping Cart</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
</head>
<body>
<a th:href="@{/shop}">Shop</a>
<h1>Your Cart</h1>
<!--<form th:action="@{/shop}" th:object="${cart}" method="post">-->
<!--  <h3>Total Item : <span th:text="${cart.countItemQuantity()}"></span> </h3>-->
<!--  <h3>Total Products : <span th:text="${cart.countProductQuantity()}"></span> </h3>-->
<!--  <table border="1">-->
<!--    <tr>-->
<!--      <th>ITem</th>-->
<!--      <th>Quantity</th>-->
<!--      <th>Price</th>-->

<!--    </tr>-->
<!--    <tr th:each="product : ${cart.products}">-->
<!--      <td th:text="${product.getKey().name}"></td>-->
<!--      <td>-->
<!--        <a th:text="${'-'}"></a>-->
<!--        <span th:text="${product.getValue()}"></span>-->
<!--        <a th:text="${'+'}" th:href="@{/add/__${product.getKey().id}__(action='show')}"></a>-->
<!--      </td>-->
<!--      <td th:text="${product.getKey().price}">-->

<!--      </td>-->
<!--    </tr>-->
<!--    <tr>-->
<!--      <td>Total</td>-->
<!--      <td></td>-->
<!--      <td th:text="${cart.countTotalPayment()}"></td>-->
<!--    </tr>-->


<!--  </table>-->


<!--</form>-->

<form th:action="@{/shop}" method="post" th:object="${cart}">
  <div style="border-bottom-style: solid">
    <h1 th:text="${'GIO HANG '+ '(' + cart.countItemQuantity() +')' }"> </h1>
  </div>

  <div th:each="product,status : ${cart.products}" style="border-bottom-style: solid" class="row col-md-12">
    <img th:class="col-md-4" th:src="@{https://file.hstatic.net/200000370523/file/img_1741_e4d51238504b4706aeaaeb22ad876996_grande.jpg}" class="card-img-top" alt="...">
    <div class="col-md-8">
    <table>
      <tr>
        <td style="color: red" th:text="${'San Pham ' + status.count }"></td>
        <td></td>
      </tr>
      <tr>
        <th>Ma SP:</th>
        <td th:text="${'HH ' + product.getKey().id}"></td>
      </tr>
      <tr>
        <td>Don Gia : </td>
        <th th:text="${product.getKey().price}"></th>

      </tr>
      <tr>
        <td>So Luong : </td>
        <td>

          <div class="dropdown">
            <button th:text="${product.getValue()}" class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">

            </button>
            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">

              <a th:each="n : ${totalProduct}" th:if="${n != product.getValue()}" th:text="${n}" class="dropdown-item" th:href="@{/shop}"></a>

            </div>
          </div>

        </td>

      </tr>
      <tr>
        <td>
          <a th:href="@{/delete/{id}(id=${product.getKey().id})}" class="btn btn-primary">Xoa Khoi Gio Hang</a>

        </td>
        <td></td>
      </tr>

    </table>



    </div>
  </div>

  <div>
    <h3 style="color: red">Tong Cong : <span style="color: black" th:text="${cart.countTotalPayment()}"></span></h3>
  </div>


</form>

</body>
</html>